<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta ne="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?fily=Open+Sans&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css" />
    <link rel="javascript" href="script.js" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <title>Work Day Scheduler</title>
</head>

<body>
    <header class="jumbotron">
        <h1 class="display-3">Work Day Scheduler</h1>
        <p class="lead">A simple calendar app for scheduling your work day</p>
        <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
        <!-- Timeblocks go here -->
        <table class="table table-hover">
            <tr>
                <th scope="col-3">TIME</th>
                <th scope="col-3">To Do</th>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="8">8</th>
                <td scope="col-3">
                    <form id="Form8">
                        <input id="ls8" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="9">9</th>
                <td scope="col-3">
                    <form id="Form9">
                        <input id="ls9" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="10">10</th>
                <td scope="col-3">
                    <form id="Form10">
                        <input id="ls10" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="11">11</th>
                <td scope="col-3" id="11">
                    <form id="Form11">
                        <input id="ls11" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="12">12</th>
                <td scope="col-3">
                    <form id="Form12">
                        <input id="ls12" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="1">1</th>
                <td scope="col-3">
                    <form id="Form1">
                        <input id="ls1" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="2">2</th>
                <td scope="col-3">
                    <form id="Form2">
                        <input id="ls2" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="3">3</th>
                <td scope="col-3">
                    <form id="Form3">
                        <input id="ls3" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="4">4</th>
                <td scope="col-3">
                    <form id="Form4">
                        <input id="ls4" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="5">5</th>
                <td scope="col-3">
                    <form id="Form5">
                        <input id="ls5" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="6">6</th>
                <td scope="col-3">
                    <form id="Form6">
                        <input id="ls6" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="7">7</th>
                <td scope="col-3">
                    <form id="Form7">
                        <input id="ls7" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
            <tr>
                <th scope="row" class="time-block" id="18">8</th>
                <td scope="col-3">
                    <form id="Form18">
                        <input id="ls18" />
                        <button type="submit" class="saveBtn">Save</button>
                    </form>
                </td>
            </tr>
        </table>

    </div>
    <script type="text/javascript">

        $(document).ready(function () {


            $("form").submit(function (event) {
                event.preventDefault()
                var input = $(this).find("input").val()
                // console.log($(this).attr("id"))
                var formId = $(this).attr("id")
                localStorage.setItem(formId, input);


            });

            let [month, date, year] = (new Date()).toLocaleDateString().split("/")
            let [hour, minute, second] = (new Date()).toLocaleTimeString().slice(0, 7).split(":")
            $("#currentDay").html(month + "/" + date + "/" + year)

            function nowTime() {
                let [hour, minute, second] = (new Date()).toLocaleTimeString().slice(0, 7).split(":")
                return hour
            }


            function ColorUpdater(hourArg) {
                hourArg = "#" + hourArg
                if ($(hourArg).text() == nowTime()) {
                    $(hourArg).siblings().addClass("present");
                }
                if ($(hourArg).text() > nowTime()) {
                    $(hourArg).siblings().addClass("future");
                }
                if ($(hourArg).text() < nowTime()) {
                    $(hourArg).siblings().addClass("past");
                }

            }


            var savedTodo = localStorage.getItem("formId");
            if (savedTodo !== null) $("input").val(savedTodo);

            // inputId is a NUMBER 
            function displayTodos(inputId) {
                var localStorageValue = localStorage.getItem("Form" + inputId)
                $("#ls" + inputId).val(localStorageValue)
            }

            var timesArray = ["8", "9", "10", "11", "12", "1", "2", "3", "4", "5", "6", "7", "18"

            ]

            for (var index = 0; index < timesArray.length; index++) {
                displayTodos(timesArray[index])
                ColorUpdater(timesArray[index])


            }



        })


    </script>

</body>

</html>